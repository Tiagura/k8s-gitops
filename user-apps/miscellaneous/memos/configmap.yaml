apiVersion: v1
kind: ConfigMap
metadata:
  name: memos-configuration
data:
  # See all settings here: https://usememos.com/docs/configuration/security
  MEMOS_PORT: "5230"    # NECESSARY
  MEMOS_MODE: "prod"
  TZ: "Europe/Lisbon"
  # Authentication Configuration
  ## Account lockout policies
  MEMOS_MAX_LOGIN_ATTEMPTS: "3"
  MEMOS_LOCKOUT_DURATION: "28800"  # 8h in seconds
  ## Session security
  MEMOS_SESSION_TIMEOUT: "3600"  # 1 hour in seconds
  MEMOS_SESSION_ABSOLUTE_TIMEOUT: "28800"  # 8 hours in seconds
  ## MFA Configuration
  MEMOS_ENABLE_MFA: "true"
  MEMOS_MFA_METHODS: "totp,email"
  MEMOS_MFA_REQUIRED_FOR_ADMINS: "true"
  MEMOS_MFA_GRACE_PERIOD: "86400"  # 24 hours
  # Security Monitoring
  ## Audit Logging
  MEMOS_AUDIT_LOG_ENABLED: "true"
  MEMOS_AUDIT_LOG_LEVEL: "info"
  MEMOS_AUDIT_LOG_FILE: "/var/log/memos/audit.log"
  ## Log retention
  MEMOS_AUDIT_LOG_RETENTION_DAYS: "90"
  MEMOS_AUDIT_LOG_ROTATION_SIZE: "100MB"