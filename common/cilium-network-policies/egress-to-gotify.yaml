apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: egress-to-gotify
spec:
  description: >
    Allow egress to Gotify server for notifications.
  endpointSelector:
    matchLabels:
      netpol.cilium.io/egress-to-gotify: "true"

  egress:
    - toServices:
      - k8sService:
          serviceName: gotify
          namespace: gotify-stack
      toPorts:
        - ports:
          - port: "80"
            protocol: TCP